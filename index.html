<!-- vim:set ts=2 sw=2 sts=2 et ai fdm=marker: -->
<!DOCTYPE html>
<html>
<body>
<script>
document.write('<table style="height:100%;width:100%; position: absolute; top: 0; bottom: 0; left: 0; right: 0;border:0px solid">');
var x = 4;
var y = 4;
var b0 = x * y;
var b = b0;
for (var i = 0; i < y; i++) {
  document.write('<tr>');
  for (var j = 0; j < x; j++) {
    document.write('<td id="clock' + --b + '"/>');
  }
  document.write('</tr>');
}
document.write('</table>');

function update() {
  var now = new Date();
  var ticks = 
    (now.getHours() * 3600 +
    now.getMinutes() * 60 +
    now.getSeconds()) * 1000 +
    now.getMilliseconds();

  ticks = Math.floor(ticks / ((86400 / (1 << b0)) * 1000));

  // uncomment for Gray code.
  //ticks = ticks ^ (ticks >>> 1);

  for (var i = 0; i < b0; i++) {
    document.getElementById("clock" + i).style.backgroundColor =
      ["black", "red"][ticks & 1];
    ticks >>>= 1;
  }

  setTimeout(update, Math.floor(1000 / ((1 << b0) / 86400)));
}

// try and start on a boundary
setTimeout(update, 1000 - new Date().getMilliseconds());
</script>
</body>
</html>
